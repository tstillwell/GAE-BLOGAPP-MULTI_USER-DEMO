{% extends "base.html" %}

{% block content %}
  {{post.render() | safe}}
  <br>
  <h4>Comments</h4>
  {{error}}
  <hr>
  {% if new_comment %}
    {{new_comment.render() | safe}}
    <script> document.write('<button class="edit_button" onclick="show_edit({{new_comment.key.id()}})">Edit Comment</button>');</script>
    <br>
  {% endif %}

  {% for c in comment_roll %}
    {{ c.render() | safe }}
    {% if c.posting_user == user %}
    <noscript>
      <form name ="edit-comment" method ="get" action="/edit/c/{{c.key.id()}}">
        <input type="submit" value="edit comment">
      </form>
    </noscript>
      <script> document.write('<button class="edit_button" onclick="show_edit({{c.key.id()}})">Edit Comment</button>');</script>
    {% endif %}
    <br>
  {% endfor %}
  <form name ="comment-form" method ="post">
    <textarea name="comment_text" placeholder="Type a comment here"></textarea>
    <br>
    <input type="submit" value="Add Comment">
  </form>
<script type="text/javascript" src="/static/ajaxcomment.js"></script>
{% endblock %}
